#! /bin/sh
# this driver script runs all static tests
# checks if a certain plugin fails or passes and returns a "PASS" or "FAIL" option
# 

testlist=("app_sampler" "papi_sampler" "generic_sampler" "grptest" "test_sampler" "job_info_slurm" "aries_mmr" "cray_system_sampler" "ibm_occ" "rapl" "sampler_atasmart" "shm" "switchx" "switchx_eth" "tsampler" "hfclock" "meminfo" "dstat" "filesingle" "loadavg" "procinterrupts" "procstat" "procnetdev" "vmstat" "clock" "fptrans" "variable" "array_example" "synthetic" "procnfs" "lustre2_client" "lnet_stats" "meminfo.job" "many" "sysclassib" "edac" "opa2" "procdiskstats" "shm")

for k in $testlist; do
	if test -x "$ENABLE_$k_TRUE"; then 
		./$bindir/ldms-static-test.sh $k 
		if [$? -eq 0]
			echo "PASS $k"
		else
			echo "FAIL $k: Please refer to test.$testname.log"
		fi
		@bindir@/ldms-static-test.sh $args > test.$testname.log
		tar czf ldmstest/$test.tgz ldmstest/$test test.$testname.log
	fi
done 
